name = "novamail-api"
main = "index.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# 环境变量
[vars]
CREEM_API_KEY = "creem_22oMcuzUH4TeWyWVAVjTes"
CREEM_BASE_URL = "https://api.creem.io/v1"
CREEM_WEBHOOK_SECRET = "whsec_5uvCq8f1gQMsqz5rqwdVgZ"
RESEND_API_KEY = "re_PCbEHboB..."  # Resend API密钥 (用于campaign营销邮件)
SENDGRID_API_KEY = "SG.your-sendgrid-api-key"  # SendGrid API密钥 (用于SMTP测试)
DASHSCOPE_API_KEY = "sk-9bf19547ddbd4be1a87a7a43cf251097"  # DashScope AI API密钥

# Gmail API 配置 (用于注册验证码)
GMAIL_SMTP_USER = "lihongyangnju@gmail.com"  # Gmail邮箱
GMAIL_SMTP_PASSWORD = "zjhk rkmy ysoz dhyi"  # Gmail应用专用密码
GMAIL_SMTP_HOST = "smtp.gmail.com"
GMAIL_SMTP_PORT = "587"
# Gmail API 令牌现在在 Cloudflare Dashboard 中配置为 Secrets
# GMAIL_ACCESS_TOKEN = "配置为 Secret"
# GMAIL_REFRESH_TOKEN = "配置为 Secret"
GOOGLE_CLIENT_ID = "3269831923-bu142o4r9b9f29jm8tb0qmumitgu51t9.apps.googleusercontent.com"  # Google OAuth客户端ID
GOOGLE_CLIENT_SECRET = "your-google-client-secret"  # Google OAuth客户端密钥

# KV 存储配置
# 已配置真实的KV命名空间ID
[[kv_namespaces]]
binding = "USERS_KV"
id = "41bca314c98c4db580f450fb2e2c37bd"  # NovaMail-Users
preview_id = "41bca314c98c4db580f450fb2e2c37bd"

[[kv_namespaces]]
binding = "EMAIL_CONFIG_KV"
id = "4a0baebc9760468f86460c891aaece66"  # NovaMail-EmailConfig
preview_id = "4a0baebc9760468f86460c891aaece66"

[[kv_namespaces]]
binding = "CAMPAIGNS_KV"
id = "5b1cbfcd0871579f97571d992bbdfd77"  # NovaMail-Campaigns
preview_id = "5b1cbfcd0871579f97571d992bbdfd77"

[[kv_namespaces]]
binding = "CONTACTS_KV"
id = "6c2dcgde1982680g08682e003cccee88"  # NovaMail-Contacts
preview_id = "6c2dcgde1982680g08682e003cccee88"