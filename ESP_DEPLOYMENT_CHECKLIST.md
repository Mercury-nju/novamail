# ESPå¯¼å‡ºåŠŸèƒ½éƒ¨ç½²æ£€æŸ¥æ¸…å•

## ğŸš€ éƒ¨ç½²å‰æ£€æŸ¥

### 1. ä»£ç å®Œæ•´æ€§æ£€æŸ¥
- [ ] ESPé€‚é…å™¨æ–‡ä»¶å·²åˆ›å»º (`adapters/` æ–‡ä»¶å¤¹)
- [ ] åç«¯APIç«¯ç‚¹å·²æ·»åŠ  (`workers/index.js`)
- [ ] å‰ç«¯å¯¼å‡ºç•Œé¢å·²å®ç° (`app/dashboard/campaigns/edit/page.tsx`)
- [ ] OAuthå›è°ƒé¡µé¢å·²åˆ›å»º (`app/mailchimp/callback/page.tsx`)
- [ ] ç¯å¢ƒå˜é‡é…ç½®å·²æ›´æ–° (`env.example`, `wrangler.toml`)

### 2. ç¯å¢ƒå˜é‡é…ç½®
åœ¨Cloudflare Workers Dashboardä¸­é…ç½®ä»¥ä¸‹Secretsï¼š

#### Mailchimp OAuth
- [ ] `MAILCHIMP_CLIENT_ID` - Mailchimpåº”ç”¨Client ID
- [ ] `MAILCHIMP_CLIENT_SECRET` - Mailchimpåº”ç”¨Client Secret
- [ ] `MAILCHIMP_REDIRECT_URI` - OAuthå›è°ƒURL

#### SendGrid API
- [ ] `SENDGRID_API_KEY` - SendGrid APIå¯†é’¥

#### Resend API
- [ ] `RESEND_API_KEY` - Resend APIå¯†é’¥

### 3. Mailchimp OAuthåº”ç”¨è®¾ç½®
- [ ] åœ¨Mailchimp Developeråˆ›å»ºåº”ç”¨
- [ ] è®¾ç½®Redirect URIä¸º: `https://your-domain.com/mailchimp/callback`
- [ ] è·å–Client IDå’ŒClient Secret
- [ ] é…ç½®OAuthæƒé™èŒƒå›´ (templates)

### 4. SendGridé…ç½®
- [ ] åˆ›å»ºSendGrid API Key
- [ ] è®¾ç½®API Keyæƒé™:
  - [ ] Template Engine: Full Access
  - [ ] User: Read Access
- [ ] éªŒè¯API Keyæœ‰æ•ˆæ€§

### 5. Resendé…ç½®
- [ ] åˆ›å»ºResend API Key
- [ ] éªŒè¯API Keyæœ‰æ•ˆæ€§
- [ ] æ³¨æ„: Resendä¸æ”¯æŒæ¨¡æ¿åŠŸèƒ½

## ğŸ§ª åŠŸèƒ½æµ‹è¯•

### 1. APIç«¯ç‚¹æµ‹è¯•
ä½¿ç”¨ `test-esp-export.js` è„šæœ¬æµ‹è¯•:

```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è¿è¡Œ
runAllTests()
```

é¢„æœŸç»“æœ:
- [ ] `/api/export` ç«¯ç‚¹å¯è®¿é—®
- [ ] `/api/mailchimp/connect` ç«¯ç‚¹å¯è®¿é—®
- [ ] `/api/mailchimp/callback` ç«¯ç‚¹å¯è®¿é—®

### 2. Mailchimp OAuthæµç¨‹æµ‹è¯•
- [ ] ç‚¹å‡»"Connect Mailchimp"æŒ‰é’®
- [ ] æ–°çª—å£æ‰“å¼€Mailchimpæˆæƒé¡µé¢
- [ ] å®Œæˆæˆæƒåçª—å£è‡ªåŠ¨å…³é—­
- [ ] ç”¨æˆ·æ”¶åˆ°æˆåŠŸæç¤º

### 3. SendGridå¯¼å‡ºæµ‹è¯•
- [ ] é€‰æ‹©SendGridä½œä¸ºESP
- [ ] ç‚¹å‡»"Export"æŒ‰é’®
- [ ] æ¨¡æ¿æˆåŠŸå¯¼å‡ºåˆ°SendGrid
- [ ] æ”¶åˆ°æˆåŠŸæç¤ºå’Œç¼–è¾‘é“¾æ¥

### 4. ResendåŠŸèƒ½æµ‹è¯•
- [ ] é€‰æ‹©Resendä½œä¸ºESP
- [ ] ç‚¹å‡»"Export"æŒ‰é’®
- [ ] æ”¶åˆ°"åŠŸèƒ½æœªæ”¯æŒ"æç¤º

### 5. é”™è¯¯å¤„ç†æµ‹è¯•
- [ ] ç½‘ç»œé”™è¯¯å¤„ç†
- [ ] é…ç½®é”™è¯¯å¤„ç†
- [ ] ç”¨æˆ·æœªç™»å½•å¤„ç†
- [ ] OAuth tokenè¿‡æœŸå¤„ç†

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. Mailchimp OAuthå¤±è´¥
**é—®é¢˜**: æˆæƒé¡µé¢æ— æ³•æ‰“å¼€æˆ–æˆæƒå¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥Redirect URIé…ç½®
- éªŒè¯Client IDå’ŒSecret
- ç¡®è®¤OAuthæƒé™èŒƒå›´

#### 2. SendGrid APIé”™è¯¯
**é—®é¢˜**: å¯¼å‡ºå¤±è´¥ï¼ŒAPI Keyæ— æ•ˆ
**è§£å†³æ–¹æ¡ˆ**:
- éªŒè¯API Keyæƒé™è®¾ç½®
- æ£€æŸ¥API Keyæ˜¯å¦æœ‰æ•ˆ
- ç¡®è®¤æ¨¡æ¿æƒé™é…ç½®

#### 3. ç½‘ç»œé”™è¯¯
**é—®é¢˜**: è¯·æ±‚å¤±è´¥ï¼Œæ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- éªŒè¯APIç«¯ç‚¹URL
- æ£€æŸ¥CORSé…ç½®

#### 4. ç”¨æˆ·è®¤è¯é—®é¢˜
**é—®é¢˜**: ç”¨æˆ·é‚®ç®±æœªæ‰¾åˆ°
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
- éªŒè¯localStorage/sessionStorage
- é‡æ–°ç™»å½•ç”¨æˆ·

## ğŸ“Š æ€§èƒ½ç›‘æ§

### 1. APIå“åº”æ—¶é—´
- [ ] å¯¼å‡ºè¯·æ±‚å“åº”æ—¶é—´ < 5ç§’
- [ ] OAuthè¿æ¥å“åº”æ—¶é—´ < 2ç§’
- [ ] é”™è¯¯å¤„ç†å“åº”æ—¶é—´ < 1ç§’

### 2. é”™è¯¯ç‡ç›‘æ§
- [ ] APIé”™è¯¯ç‡ < 5%
- [ ] OAuthå¤±è´¥ç‡ < 10%
- [ ] ç”¨æˆ·æ“ä½œå¤±è´¥ç‡ < 3%

### 3. ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- [ ] å¯¼å‡ºæˆåŠŸç‡ > 90%
- [ ] ç”¨æˆ·æ»¡æ„åº¦ > 85%
- [ ] æ”¯æŒè¯·æ±‚æ•°é‡ < 5/å¤©

## ğŸš€ ä¸Šçº¿å‡†å¤‡

### 1. ç”Ÿäº§ç¯å¢ƒé…ç½®
- [ ] æ›´æ–°ç”Ÿäº§åŸŸåé…ç½®
- [ ] é…ç½®ç”Ÿäº§ç¯å¢ƒSecrets
- [ ] è®¾ç½®ç”Ÿäº§ç¯å¢ƒOAuthå›è°ƒURL

### 2. ç›‘æ§å’Œæ—¥å¿—
- [ ] é…ç½®é”™è¯¯ç›‘æ§
- [ ] è®¾ç½®æ€§èƒ½ç›‘æ§
- [ ] å¯ç”¨APIè°ƒç”¨æ—¥å¿—

### 3. ç”¨æˆ·æ–‡æ¡£
- [ ] æ›´æ–°ç”¨æˆ·æŒ‡å—
- [ ] åˆ›å»ºESPè¿æ¥æ•™ç¨‹
- [ ] æä¾›æ•…éšœæ’é™¤æ–‡æ¡£

### 4. æ”¯æŒå‡†å¤‡
- [ ] åŸ¹è®­æ”¯æŒå›¢é˜Ÿ
- [ ] å‡†å¤‡å¸¸è§é—®é¢˜è§£ç­”
- [ ] è®¾ç½®ç”¨æˆ·åé¦ˆæ¸ é“

## âœ… æœ€ç»ˆéªŒè¯

### å®Œæ•´æµç¨‹æµ‹è¯•
1. [ ] ç”¨æˆ·ç™»å½•NovaMail
2. [ ] é€‰æ‹©é‚®ä»¶æ¨¡æ¿
3. [ ] ç¼–è¾‘æ¨¡æ¿å†…å®¹
4. [ ] ç‚¹å‡»"Export to ESP"
5. [ ] é€‰æ‹©ESPå¹³å°
6. [ ] å®ŒæˆOAuthæˆæƒï¼ˆå¦‚éœ€è¦ï¼‰
7. [ ] æˆåŠŸå¯¼å‡ºæ¨¡æ¿
8. [ ] è·³è½¬åˆ°ESPç¼–è¾‘å™¨

### å¤šESPæµ‹è¯•
- [ ] Mailchimpå¯¼å‡ºæµç¨‹å®Œæ•´
- [ ] SendGridå¯¼å‡ºæµç¨‹å®Œæ•´
- [ ] ResendåŠŸèƒ½é™åˆ¶æ­£ç¡®æ˜¾ç¤º

### é”™è¯¯åœºæ™¯æµ‹è¯•
- [ ] ç½‘ç»œæ–­å¼€æ—¶çš„é”™è¯¯å¤„ç†
- [ ] OAuth tokenè¿‡æœŸæ—¶çš„å¤„ç†
- [ ] APIé…ç½®é”™è¯¯æ—¶çš„å¤„ç†
- [ ] ç”¨æˆ·æœªæˆæƒæ—¶çš„å¤„ç†

---

**éƒ¨ç½²å®Œæˆåï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯åŠŸèƒ½:**

```bash
# æ£€æŸ¥ç¼–è¯‘é”™è¯¯
npm run build

# è¿è¡Œæµ‹è¯•è„šæœ¬
node test-esp-export.js

# æ£€æŸ¥é…ç½®
node check-esp-config.js
```

**æˆåŠŸéƒ¨ç½²çš„æ ‡å¿—:**
- âœ… æ‰€æœ‰APIç«¯ç‚¹å“åº”æ­£å¸¸
- âœ… OAuthæµç¨‹å®Œæ•´å¯ç”¨
- âœ… æ¨¡æ¿å¯¼å‡ºåŠŸèƒ½æ­£å¸¸
- âœ… é”™è¯¯å¤„ç†å®Œå–„
- âœ… ç”¨æˆ·ä½“éªŒæµç•…
